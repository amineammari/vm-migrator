DEBUG=false
SECRET_KEY=change-me-to-a-long-random-secret
ALLOWED_HOSTS=127.0.0.1,localhost

# Database
# DATABASE_URL=mysql://vm_user:admin@127.0.0.1:3306/vm_migrator?charset=utf8mb4
# DATABASE_URL=postgres://vm_user:admin@127.0.0.1:5432/vm_migrator
DATABASE_URL=sqlite:///db.sqlite3
DB_CONN_MAX_AGE=600

# Runtime
TIME_ZONE=UTC

# Redis / Celery
REDIS_URL=redis://127.0.0.1:6379/0
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_SOFT_TIME_LIMIT=3600
CELERY_TASK_TIME_LIMIT=3900
CELERY_TASK_DEFAULT_RETRY_DELAY=30
CELERY_PUBLISH_MAX_RETRIES=3

# Periodic discovery (Celery beat)
# Start beat with: celery -A core beat -l INFO
ENABLE_PERIODIC_DISCOVERY=false
DISCOVERY_INTERVAL_SECONDS=300
DISCOVERY_INCLUDE_WORKSTATION=true
DISCOVERY_INCLUDE_ESXI=true

# Logging
LOG_LEVEL=INFO
# LOG_DIR defaults to "<project>/logs" if not set.
# LOG_DIR=/path/to/vm-migrator/backend/logs
APP_LOG_MAX_BYTES=10485760
APP_LOG_BACKUP_COUNT=5
WORKER_LOG_MAX_BYTES=20971520
WORKER_LOG_BACKUP_COUNT=7

# VMware Workstation discovery roots (comma-separated)
VMWARE_WORKSTATION_PATHS=~/vmware,~/Virtual\\ Machines

# ESXi/vCenter discovery credentials
VMWARE_ESXI_HOST=
VMWARE_ESXI_PORT=443
VMWARE_ESXI_USERNAME=
VMWARE_ESXI_PASSWORD=
VMWARE_ESXI_INSECURE=true

# ESXi conversion transport:
# - libvirt_esx: uses libvirt ESX driver over HTTPS (may fail depending on ESXi HTTP range support)
# - vddk: uses VMware VDDK via nbdkit-vddk-plugin (recommended for ESXi)
VMWARE_ESXI_CONVERSION_TRANSPORT=vddk
VMWARE_VDDK_LIBDIR=/opt/vmware/vmware-vix-disklib-distrib
VMWARE_VDDK_THUMBPRINT=
VMWARE_VDDK_NBDKIT_PLUGIN_PATH=~/.local/lib/nbdkit/plugins
VMWARE_NBDKIT_BIN=~/.local/bin/nbdkit
VMWARE_NBDKIT_FILTER_PATH=~/.local/lib/nbdkit/filters

# Conversion execution
ENABLE_REAL_CONVERSION=false
# For local dev, a project-local folder works well:
# MIGRATION_OUTPUT_DIR=/path/to/vm-migrator/backend/images
MIGRATION_OUTPUT_DIR=/var/lib/vm-migrator/images
VIRT_V2V_TIMEOUT_SECONDS=7200

# Rollback
ENABLE_ROLLBACK=true

# Minimal artifact backup (stores a copy of QCOW2 before OpenStack upload).
ENABLE_ARTIFACT_BACKUP=false
ARTIFACT_BACKUP_DIR=/var/lib/vm-migrator/images/backups
ARTIFACT_BACKUP_REQUIRED=false

# ESXi conversion guardrails
VMWARE_REQUIRE_NO_SNAPSHOTS=true

# OpenStack deployment
ENABLE_OPENSTACK_DEPLOYMENT=false
OPENSTACK_CLOUD_NAME=openstack
OPENSTACK_DEFAULT_NETWORK=
# When DevStack exposes Glance only on localhost, first rebind it to 0.0.0.0 on the OpenStack VM,
# then set this to the direct Glance endpoint (example):
# OPENSTACK_IMAGE_ENDPOINT_OVERRIDE=http://192.168.72.169:60999
OPENSTACK_IMAGE_ENDPOINT_OVERRIDE=
OPENSTACK_VERIFY_TIMEOUT=900
OPENSTACK_VERIFY_POLL_INTERVAL=10
OPENSTACK_IMAGE_UPLOAD_TIMEOUT=900
OPENSTACK_IMAGE_UPLOAD_POLL_INTERVAL=5
OPENSTACK_API_RETRIES=2
OPENSTACK_API_RETRY_DELAY=3

# OpenStack auth (DevStack / env-based)
# If your ~/.config/openstack/clouds.yaml is missing or not readable by the backend user,
# you can provide Keystone auth via OS_* variables.
OS_AUTH_TYPE=password
OS_AUTH_URL=
OS_USERNAME=
OS_PASSWORD=
OS_PROJECT_NAME=
OS_USER_DOMAIN_NAME=Default
OS_PROJECT_DOMAIN_NAME=Default
OS_IDENTITY_API_VERSION=3
OS_INTERFACE=public
OS_REGION_NAME=RegionOne
OS_VERIFY=false
